---
Title: autopilot.matchers.Eventually
---

# autopilot.matchers.Eventually

<dl class="class">
<dt id="autopilot.matchers.Eventually">
<em class="property">class </em><tt class="descclassname">autopilot.matchers.</tt><tt class="descname">Eventually</tt><big>(</big><em>matcher</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="#Eventually"></a><a class="headerlink" href="#autopilot.matchers.Eventually" title="Permalink to this definition"></a></dt>
<dd><p>Asserts that a value will eventually equal a given Matcher object.</p>
<p>This matcher wraps another testtools matcher object. It makes that other
matcher work with a timeout. This is necessary for several reasons:</p>
<ol class="arabic simple">
<li>Since most actions in a GUI applicaton take some time to complete, the
test may need to wait for the application to enter the expected state.</li>
<li>Since the test is running in a separate process to the application under
test, test authors cannot make any assumptions about when the
application under test will recieve CPU time to update to the expected
state.</li>
</ol>
<p>There are two main ways of using the Eventually matcher:</p>
<p><strong>Attributes from the application</strong>:</p>
<pre><span class="bp">self</span><span class="o">.</span><span class="n">assertThat</span><span class="p">(</span><span class="n">window</span><span class="o">.</span><span class="n">maximized</span><span class="p">,</span> <span class="n">Eventually</span><span class="p">(</span><span class="n">Equals</span><span class="p">(</span><span class="bp">True</span><span class="p">)))</span>
</pre>
<p>Here, <tt class="docutils literal"><span class="pre">window</span></tt> is an object generated by autopilot from the applications
state. This pattern of usage will cover 90% (or more) of the assertions in
an autopilot test. Note that any matcher can be used - either from
testtools or any custom matcher that implements the matcher API:</p>
<pre><span class="bp">self</span><span class="o">.</span><span class="n">assertThat</span><span class="p">(</span><span class="n">window</span><span class="o">.</span><span class="n">height</span><span class="p">,</span> <span class="n">Eventually</span><span class="p">(</span><span class="n">GreaterThan</span><span class="p">(</span><span class="mi">200</span><span class="p">)))</span>
</pre>
<p><strong>Callable Objects</strong>:</p>
<pre><span class="bp">self</span><span class="o">.</span><span class="n">assertThat</span><span class="p">(</span>
<span class="n">autopilot</span><span class="o">.</span><span class="n">platform</span><span class="o">.</span><span class="n">model</span><span class="p">,</span> <span class="n">Eventually</span><span class="p">(</span><span class="n">Equals</span><span class="p">(</span><span class="s">&quot;Galaxy Nexus&quot;</span><span class="p">)))</span>
</pre>
<p>In this example we&#8217;re using the <tt class="xref py py-func docutils literal"><span class="pre">autopilot.platform.model</span></tt> function
as a callable. In this form, Eventually matches against the return value
of the callable.</p>
<p>This can also be used to use a regular python property inside an Eventually
matcher:</p>
<pre><span class="bp">self</span><span class="o">.</span><span class="n">assertThat</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">mouse</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">Eventually</span><span class="p">(</span><span class="n">LessThan</span><span class="p">(</span><span class="mi">10</span><span class="p">)))</span>
</pre>
<p class="first admonition-title">Note</p>
<p class="last">Using this form generally makes your tests less readable, and
should be used with great care. It also relies the test author to have
knowledge about the implementation of the object being matched against.
In this example, if <tt class="docutils literal"><span class="pre">self.mouse.x</span></tt> were ever to change to be a
regular python attribute, this test would likely break.</p>
<p><strong>Timeout</strong></p>
<p>By default timeout period is ten seconds. This can be altered by passing
the timeout keyword:</p>
<pre><span class="bp">self</span><span class="o">.</span><span class="n">assertThat</span><span class="p">(</span><span class="n">foo</span><span class="o">.</span><span class="n">bar</span><span class="p">,</span> <span class="n">Eventually</span><span class="p">(</span><span class="n">Equals</span><span class="p">(</span><span class="mi">123</span><span class="p">),</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">30</span><span class="p">))</span>
</pre>
<p class="first admonition-title">Warning</p>
<p class="last">The Eventually matcher does not work with any other matcher
that expects a callable argument (such as testtools&#8217; &#8216;Raises&#8217; matcher)</p>
</dd></dl>
